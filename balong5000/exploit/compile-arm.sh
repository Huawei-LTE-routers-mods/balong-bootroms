#!/bin/bash
arm-none-eabi-gcc -march=armv7-m -mtune=cortex-m3 -mthumb \
 -fno-ident -fno-builtin -ffreestanding \
 -fno-tree-loop-distribute-patterns \
 -nostdlib -Os -fPIC read.c -S -o read.s
arm-none-eabi-as -march=armv7-m -mthumb read.s -o read.o
arm-none-eabi-ld -N read.o -o read.out
arm-none-eabi-objcopy -O binary read.out read.bin
